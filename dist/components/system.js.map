{"version":3,"sources":["../../components/system.js"],"names":["Vue","component","props","template","methods","removeSystem","$emit","system","click","event","stopPropagation","upDragStart","offsetY","clientY","y","bottom","height","upDragging","upDragEnd","upDrag","newY","newHeight","downDragStart","downDragging","downDragEnd","downDrag","removeItem","item","index","systems","indexOf","splice","layerY","every","e","push","System"],"mappings":"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","file":"system.js","sourcesContent":["/**\n * Created by somefive on 17-7-5.\n */\nVue.component('system-item',{\n\tprops: ['system'],\n\ttemplate:\n\t\t`<div class=\"widget system\" @click=\"click\"\n\t\t\t\tv-bind:style=\"{top: system.y + 'px', height: system.height + 'px'}\">\n\t\t\t\t<div class=\"close-btn\" v-on:click=\"removeSystem()\"><i class=\"fa fa-window-close\"></i></div>\n\t\t\t\t<div class=\"up-stretch boundary-stretch\"\n\t\t\t\t\t@mousemove=\"upDrag\" @mousedown=\"upDragStart\"\n\t\t\t\t\t@mouseup=\"upDragEnd\" @mouseleave=\"upDragEnd\">\n\t\t\t\t\t<i class=\"fa fa-angle-up\"></i></div>\n\t\t\t\t<div class=\"down-stretch boundary-stretch\"\n\t\t\t\t\t@mousemove=\"downDrag\" @mousedown=\"downDragStart\"\n\t\t\t\t\t@mouseup=\"downDragEnd\" @mouseleave=\"downDragEnd\">\n\t\t\t\t\t<i class=\"fa fa-angle-down\"></i></div>\n\t\t\t</div>`,\n\tmethods: {\n\t\tremoveSystem: function() {\n\t\t\tthis.$emit('remove', this.system);\n\t\t},\n\t\tclick: function(event) {\n\t\t\tevent.stopPropagation();\n\t\t},\n\t\tupDragStart: function(event) {\n\t\t\tthis.system.offsetY = event.clientY - this.system.y;\n\t\t\tthis.system.bottom = this.system.y + this.system.height;\n\t\t\tthis.system.upDragging = true;\n\t\t},\n\t\tupDragEnd: function(event) {\n\t\t\tthis.upDrag(event);\n\t\t\tthis.system.upDragging = false;\n\t\t},\n\t\tupDrag: function(event) {\n\t\t\tif (!this.system.upDragging) return;\n\t\t\tlet newY = event.clientY - this.system.offsetY;\n\t\t\tlet newHeight = this.system.bottom - newY;\n\t\t\tif (newHeight > 30) {\n\t\t\t\tthis.system.y = newY;\n\t\t\t\tthis.system.height = newHeight;\n\t\t\t}\n\t\t},\n\t\tdownDragStart: function(event) {\n\t\t\tthis.system.offsetY = event.clientY - this.system.y - this.system.height;\n\t\t\tthis.system.downDragging = true;\n\t\t},\n\t\tdownDragEnd: function(event) {\n\t\t\tthis.downDrag(event);\n\t\t\tthis.system.downDragging = false;\n\t\t},\n\t\tdownDrag: function(event) {\n\t\t\tif (!this.system.downDragging) return;\n\t\t\tlet newY = event.clientY - this.system.offsetY;\n\t\t\tlet newHeight = newY - this.system.y;\n\t\t\tif (newHeight > 30) this.system.height = newHeight;\n\t\t}\n\t}\n});\nVue.component('system-items',{\n\tprops: ['systems'],\n\ttemplate:\n\t\t`<div id=\"div-systems\" @click=\"click\">\n            \t<system-item v-for=\"system in systems\" v-bind:system=\"system\" v-on:remove=\"removeItem\"></system-item>\n        \t</div>`,\n\tmethods: {\n\t\tremoveItem: function(item) {\n\t\t\tlet index = this.systems.indexOf(item);\n\t\t\tif (index >= 0) this.systems.splice(index,1);\n\t\t},\n\t\tclick: function(event) {\n\t\t\tlet y = event.layerY;\n\t\t\tif (this.systems.every((e) => {\n\t\t\t\t\treturn y < e.y || y > (e.y+e.height);\n\t\t\t\t})) {\n\t\t\t\tthis.systems.push(new System(y, 30));\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n});"]}